{% extends "base.html" %}

{% block title %}Preference Swapping - Rutgers Room Swap{% endblock %}

{% block content %}
<div class="form-section">
    <div id="welcomeMessage" style="text-align: center; margin-bottom: 30px; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px;">
        <h1 style="color: #ffff99; margin-bottom: 10px;">Welcome, <span id="userDisplayName">User</span>!</h1>
        <p style="color: #ffdddd; font-size: 1.1rem;">Create a preference-based swap request with multiple choices!</p>
    </div>

    <h2>Your Preference-Based Swap Request</h2>
    
    <!-- User Request Section -->
    <div id="userRequestSection">
        <div id="noRequest" style="text-align: center; color: #ffcccc;">
            <p style="margin-bottom: 20px;">You haven't posted a preference-based swap request yet.</p>
            <button class="btn" onclick="showCreateForm()" id="createRequestBtn">Create Preference Swap Request</button>
        </div>
        
        <div id="hasRequest" style="display: none;">
            <div id="userRequestCard" class="listing-card">
                <!-- User's request will be displayed here -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="showEditForm()" id="editRequestBtn">Edit Request</button>
                <button class="btn btn-danger" onclick="deleteRequest()" id="deleteRequestBtn">Delete Request</button>
            </div>
        </div>
    </div>
</div>

<div class="form-section">
    <h2>Your Matches</h2>
    <div id="matchesSection">
        <div id="noMatches" style="text-align: center; color: #ffcccc;">
            <p>No mutual matches yet. Update your desired housing to improve chances.</p>
        </div>

        <div id="matchesList" class="listings" style="display: none;">
            <!-- Confirmed matches will be displayed here -->
        </div>
    </div>
</div>

<div class="form-section" id="createEditForm" style="display: none;">
    <h2 id="formTitle">Create Preference Swap Request</h2>
    <form id="swapForm">
        <div class="form-row">
            <div class="form-group">
                <label for="currentApartment">Current Apartment/Dorm:</label>
                <select id="currentApartment" name="currentApartment" required>
                    <option value="">Select your current housing</option>
                    <option value="Davidson Hall D">Davidson Hall D</option>
                    <option value="Buell Apartments">Buell Apartments</option>
                    <option value="Frelinghuysen Apartments">Frelinghuysen Apartments</option>
                    <option value="Johnson Apartments">Johnson Apartments</option>
                    <option value="Marvin Apartments">Marvin Apartments</option>
                    <option value="Starkey Apartments">Starkey Apartments</option>
                    <option value="Silvers Apartments">Silvers Apartments</option>
                    <option value="Honors College">Honors College</option>
                    <option value="Stonier Hall">Stonier Hall</option>
                    <option value="Tinsley Hall">Tinsley Hall</option>
                    <option value="University Center at Easton Avenue">University Center at Easton Avenue</option>
                    <option value="Wessels Hall">Wessels Hall</option>
                    <option value="Leupp Hall">Leupp Hall</option>
                    <option value="Mettler Hall">Mettler Hall</option>
                    <option value="Pell Hall">Pell Hall</option>
                    <option value="Sojourner Truth Apartments">Sojourner Truth Apartments</option>
                    <option value="Helyar House">Helyar House</option>
                    <option value="Henderson Apartments">Henderson Apartments</option>
                    <option value="Jameson Hall">Jameson Hall</option>
                    <option value="Katzenbach Hall">Katzenbach Hall</option>
                    <option value="Lippincott Hall">Lippincott Hall</option>
                    <option value="New Gibbons">New Gibbons</option>
                    <option value="Newell Apartments">Newell Apartments</option>
                    <option value="Livingston Apartments">Livingston Apartments</option>
                    <option value="Lynton Towers North & South">Lynton Towers North & South</option>
                    <option value="Quad I, II, III">Quad I, II, III</option>
                </select>
            </div>
            <div class="form-group">
                <label for="currentRoom">Current Room/Unit:</label>
                <input type="text" id="currentRoom" name="currentRoom" placeholder="e.g., Apt 4B, Room 302" required>
            </div>
        </div>

        <div class="form-group">
            <label for="firstChoice">1st Choice Apartment/Dorm:</label>
            <select id="firstChoice" name="firstChoice" required>
                <option value="">Select 1st choice housing</option>
                <option value="Davidson Hall D">Davidson Hall D</option>
                <option value="Buell Apartments">Buell Apartments</option>
                <option value="Frelinghuysen Apartments">Frelinghuysen Apartments</option>
                <option value="Johnson Apartments">Johnson Apartments</option>
                <option value="Marvin Apartments">Marvin Apartments</option>
                <option value="Starkey Apartments">Starkey Apartments</option>
                <option value="Silvers Apartments">Silvers Apartments</option>
                <option value="Honors College">Honors College</option>
                <option value="Stonier Hall">Stonier Hall</option>
                <option value="Tinsley Hall">Tinsley Hall</option>
                <option value="University Center at Easton Avenue">University Center at Easton Avenue</option>
                <option value="Wessels Hall">Wessels Hall</option>
                <option value="Leupp Hall">Leupp Hall</option>
                <option value="Mettler Hall">Mettler Hall</option>
                <option value="Pell Hall">Pell Hall</option>
                <option value="Sojourner Truth Apartments">Sojourner Truth Apartments</option>
                <option value="Helyar House">Helyar House</option>
                <option value="Henderson Apartments">Henderson Apartments</option>
                <option value="Jameson Hall">Jameson Hall</option>
                <option value="Katzenbach Hall">Katzenbach Hall</option>
                <option value="Lippincott Hall">Lippincott Hall</option>
                <option value="New Gibbons">New Gibbons</option>
                <option value="Newell Apartments">Newell Apartments</option>
                <option value="Livingston Apartments">Livingston Apartments</option>
                <option value="Lynton Towers North & South">Lynton Towers North & South</option>
                <option value="Quad I, II, III">Quad I, II, III</option>
            </select>
        </div>

        <div class="form-group">
            <label for="secondChoice">2nd Choice Apartment/Dorm:</label>
            <select id="secondChoice" name="secondChoice" required>
                <option value="">Select 2nd choice housing</option>
                <option value="Davidson Hall D">Davidson Hall D</option>
                <option value="Buell Apartments">Buell Apartments</option>
                <option value="Frelinghuysen Apartments">Frelinghuysen Apartments</option>
                <option value="Johnson Apartments">Johnson Apartments</option>
                <option value="Marvin Apartments">Marvin Apartments</option>
                <option value="Starkey Apartments">Starkey Apartments</option>
                <option value="Silvers Apartments">Silvers Apartments</option>
                <option value="Honors College">Honors College</option>
                <option value="Stonier Hall">Stonier Hall</option>
                <option value="Tinsley Hall">Tinsley Hall</option>
                <option value="University Center at Easton Avenue">University Center at Easton Avenue</option>
                <option value="Wessels Hall">Wessels Hall</option>
                <option value="Leupp Hall">Leupp Hall</option>
                <option value="Mettler Hall">Mettler Hall</option>
                <option value="Pell Hall">Pell Hall</option>
                <option value="Sojourner Truth Apartments">Sojourner Truth Apartments</option>
                <option value="Helyar House">Helyar House</option>
                <option value="Henderson Apartments">Henderson Apartments</option>
                <option value="Jameson Hall">Jameson Hall</option>
                <option value="Katzenbach Hall">Katzenbach Hall</option>
                <option value="Lippincott Hall">Lippincott Hall</option>
                <option value="New Gibbons">New Gibbons</option>
                <option value="Newell Apartments">Newell Apartments</option>
                <option value="Livingston Apartments">Livingston Apartments</option>
                <option value="Lynton Towers North & South">Lynton Towers North & South</option>
                <option value="Quad I, II, III">Quad I, II, III</option>
            </select>
        </div>

        <div class="form-group">
            <label for="thirdChoice">3rd Choice Apartment/Dorm:</label>
            <select id="thirdChoice" name="thirdChoice" required>
                <option value="">Select 3rd choice housing</option>
                <option value="Davidson Hall D">Davidson Hall D</option>
                <option value="Buell Apartments">Buell Apartments</option>
                <option value="Frelinghuysen Apartments">Frelinghuysen Apartments</option>
                <option value="Johnson Apartments">Johnson Apartments</option>
                <option value="Marvin Apartments">Marvin Apartments</option>
                <option value="Starkey Apartments">Starkey Apartments</option>
                <option value="Silvers Apartments">Silvers Apartments</option>
                <option value="Honors College">Honors College</option>
                <option value="Stonier Hall">Stonier Hall</option>
                <option value="Tinsley Hall">Tinsley Hall</option>
                <option value="University Center at Easton Avenue">University Center at Easton Avenue</option>
                <option value="Wessels Hall">Wessels Hall</option>
                <option value="Leupp Hall">Leupp Hall</option>
                <option value="Mettler Hall">Mettler Hall</option>
                <option value="Pell Hall">Pell Hall</option>
                <option value="Sojourner Truth Apartments">Sojourner Truth Apartments</option>
                <option value="Helyar House">Helyar House</option>
                <option value="Henderson Apartments">Henderson Apartments</option>
                <option value="Jameson Hall">Jameson Hall</option>
                <option value="Katzenbach Hall">Katzenbach Hall</option>
                <option value="Lippincott Hall">Lippincott Hall</option>
                <option value="New Gibbons">New Gibbons</option>
                <option value="Newell Apartments">Newell Apartments</option>
                <option value="Livingston Apartments">Livingston Apartments</option>
                <option value="Lynton Towers North & South">Lynton Towers North & South</option>
                <option value="Quad I, II, III">Quad I, II, III</option>
            </select>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button type="submit" class="btn" id="submitBtn">Create Request</button>
            <button type="button" class="btn btn-secondary" onclick="hideForm()" style="margin-left: 10px;">Cancel</button>
        </div>
    </form>
</div>

<script src="{{ url_for('static', filename='js/dashboard-utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/preference-swapping.js') }}"></script>
{% endblock %} 